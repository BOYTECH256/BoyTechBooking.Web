@model Payment
@{
    ViewData["Title"] = "Payment Details";
}

<h1>Payment #@Model.PaymentId</h1>
<dl class="row">
    <dt class="col-sm-2">User</dt>
    <dd class="col-sm-10">@Model.ApplicationUser?.UserName</dd>

    <dt class="col-sm-2">Concert</dt>
    <dd class="col-sm-10">@Model.ConcertId</dd>

    <dt class="col-sm-2">Amount</dt>
    <dd class="col-sm-10">@Model.Amount</dd>

    <dt class="col-sm-2">Total Amount</dt>
    <dd class="col-sm-10">@Model.TotalAmount</dd>

    <dt class="col-sm-2">PaidAt</dt>
    <dd class="col-sm-10">@Model.PaidAt.ToString("f")</dd>

    <dt class="col-sm-2">Successful</dt>
    <dd class="col-sm-10">@Model.IsSuccessful</dd>

    <dt class="col-sm-2">Provider</dt>
    <dd class="col-sm-10">@Model.Provider</dd>

    <dt class="col-sm-2">ExternalPaymentId</dt>
    <dd class="col-sm-10">@Model.ExternalPaymentId</dd>
</dl>

@if (Model.Items != null && Model.Items.Any())
{
    <h4>Items</h4>
    <table class="table">
        <thead>
            <tr><th>ConcertId</th><th>Amount</th></tr>
        </thead>
        <tbody>
            @foreach (var item in Model.Items)
            {
                <tr>
                    <td>@item.ConcertId</td>
                    <td>@item.Amount</td>
                </tr>
            }
        </tbody>
    </table>
}

<form asp-action="Reconcile" method="post">
    <input type="hidden" name="id" value="@Model.PaymentId" />
    <button type="submit" name="markSuccessful" value="true" class="btn btn-success">Mark Successful</button>
    <button type="submit" name="markSuccessful" value="false" class="btn btn-danger">Mark Failed</button>
    <a asp-action="Index" class="btn btn-secondary">Back</a>
</form>